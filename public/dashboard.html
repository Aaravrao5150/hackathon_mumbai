<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="firebase-init.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>

</head>

<body>

<div class="card">
<h2 class="glow">Analytics</h2>
<canvas id="c"></canvas>
</div>

<script>
const db=firebase.firestore();

db.collection("attendance").get().then(s=>{

 let labels=[],vals=[];

 s.forEach(d=>{
   labels.push(d.data().roll+"-"+d.data().status);
   vals.push(d.data().trust);
 });

 new Chart(document.getElementById("c"),{
   type:'bar',
   data:{
     labels:labels,
     datasets:[{
        label:'Trust',
        data:vals,
        backgroundColor:'#00ffaa'
     }]
   }
 });

});
</script>

</body>
</html>
